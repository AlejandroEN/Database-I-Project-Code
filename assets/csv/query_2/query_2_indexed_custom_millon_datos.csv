Nested Loop Left Join  (cost=28984.43..6262044.43 rows=15941 width=85) (actual time=433.018..16847.241 rows=31546 loops=1)
  ->  Hash Join  (cost=28984.14..3812224.06 rows=15941 width=94) (actual time=432.212..1925.587 rows=31546 loops=1)
        Hash Cond: (colaborador.dni = persona.dni)
        ->  Seq Scan on colaborador  (cost=0.00..3778803.67 rows=50000 width=42) (actual time=268.423..1657.018 rows=100000 loops=1)
              Filter: (esta_activo AND (SubPlan 3))
              SubPlan 3
                ->  Nested Loop  (cost=0.42..112.47 rows=3 width=0) (actual time=0.014..0.014 rows=1 loops=100000)
                      ->  Index Only Scan using colaborador_pkey on colaborador c_1  (cost=0.42..8.44 rows=1 width=0) (actual time=0.003..0.003 rows=1 loops=100000)
                            Index Cond: (dni = colaborador.dni)
                            Heap Fetches: 100000
                      ->  Seq Scan on sede sede_2  (cost=0.00..104.00 rows=3 width=0) (actual time=0.010..0.010 rows=1 loops=100000)
                            Filter: (((EXTRACT(year FROM CURRENT_DATE) - EXTRACT(year FROM construccion_fecha)) > '0'::numeric) AND (((EXTRACT(year FROM CURRENT_DATE) - EXTRACT(year FROM construccion_fecha)) % '10'::numeric) = '0'::numeric))
                            Rows Removed by Filter: 20
        ->  Hash  (cost=21573.81..21573.81 rows=318827 width=61) (actual time=163.232..163.233 rows=317484 loops=1)
              Buckets: 131072  Batches: 8  Memory Usage: 4638kB
              ->  Bitmap Heap Scan on persona  (cost=4400.40..21573.81 rows=318827 width=61) (actual time=12.922..72.701 rows=317484 loops=1)
                    Recheck Cond: ((nacimiento_fecha >= '1960-01-01'::date) AND (nacimiento_fecha <= '1980-12-31'::date))
                    Heap Blocks: exact=12391
                    ->  Bitmap Index Scan on idx_persona_nacimiento_fecha  (cost=0.00..4320.70 rows=318827 width=0) (actual time=11.639..11.639 rows=317484 loops=1)
                          Index Cond: ((nacimiento_fecha >= '1960-01-01'::date) AND (nacimiento_fecha <= '1980-12-31'::date))
  ->  Index Only Scan using profesor_pkey on profesor  (cost=0.29..0.33 rows=1 width=9) (actual time=0.003..0.003 rows=0 loops=31546)
        Index Cond: (dni = colaborador.dni)
        Heap Fetches: 0
  SubPlan 1
    ->  Aggregate  (cost=40.81..40.82 rows=1 width=8) (actual time=0.006..0.006 rows=1 loops=15696)
          ->  Nested Loop  (cost=4.73..40.81 rows=1 width=4) (actual time=0.006..0.006 rows=0 loops=15696)
                ->  Bitmap Heap Scan on profesor_sede  (cost=4.44..15.77 rows=3 width=4) (actual time=0.004..0.005 rows=2 loops=15696)
                      Recheck Cond: (profesor_dni = profesor.dni)
                      Heap Blocks: exact=28450
                      ->  Bitmap Index Scan on profesor_sede_pkey  (cost=0.00..4.44 rows=3 width=0) (actual time=0.003..0.003 rows=2 loops=15696)
                            Index Cond: (profesor_dni = profesor.dni)
                ->  Memoize  (cost=0.29..8.33 rows=1 width=4) (actual time=0.000..0.000 rows=0 loops=28497)
                      Cache Key: profesor_sede.sede_id
                      Cache Mode: logical
                      Hits: 26497  Misses: 2000  Evictions: 0  Overflows: 0  Memory Usage: 139kB
                      ->  Index Scan using sede_pkey on sede  (cost=0.28..8.32 rows=1 width=4) (actual time=0.003..0.003 rows=0 loops=2000)
                            Index Cond: (id = profesor_sede.sede_id)
                            Filter: (((EXTRACT(year FROM CURRENT_DATE) - EXTRACT(year FROM construccion_fecha)) > '0'::numeric) AND (((EXTRACT(year FROM CURRENT_DATE) - EXTRACT(year FROM construccion_fecha)) % '10'::numeric) = '0'::numeric))
                            Rows Removed by Filter: 1
  SubPlan 2
    ->  Aggregate  (cost=112.47..112.48 rows=1 width=4) (actual time=0.926..0.926 rows=1 loops=15850)
          ->  Nested Loop  (cost=0.42..112.47 rows=3 width=4) (actual time=0.016..0.919 rows=162 loops=15850)
                ->  Index Only Scan using colaborador_pkey on colaborador c  (cost=0.42..8.44 rows=1 width=0) (actual time=0.004..0.005 rows=1 loops=15850)
                      Index Cond: (dni = colaborador.dni)
                      Heap Fetches: 15850
                ->  Seq Scan on sede sede_1  (cost=0.00..104.00 rows=3 width=4) (actual time=0.010..0.902 rows=162 loops=15850)
                      Filter: (((EXTRACT(year FROM CURRENT_DATE) - EXTRACT(year FROM construccion_fecha)) > '0'::numeric) AND (((EXTRACT(year FROM CURRENT_DATE) - EXTRACT(year FROM construccion_fecha)) % '10'::numeric) = '0'::numeric))
                      Rows Removed by Filter: 1838
Planning Time: 0.953 ms
JIT:
  Functions: 51
"  Options: Inlining true, Optimization true, Expressions true, Deforming true"
"  Timing: Generation 4.659 ms, Inlining 34.497 ms, Optimization 138.122 ms, Emission 95.787 ms, Total 273.065 ms"
Execution Time: 16854.632 ms
